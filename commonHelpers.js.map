{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict';\n\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport icon from '../img/icon.svg';\n\n\nconst input = document.querySelector(\"input#datetime-picker\");\nconst startButton = document.querySelector(\"button\");\nconst daysDisplayed = document.querySelector(\"span[data-days]\");\nconst hoursDisplayed = document.querySelector(\"span[data-hours]\");\nconst minutesDisplayed = document.querySelector(\"span[data-minutes]\");\nconst secondsDisplayed = document.querySelector(\"span[data-seconds]\");\n\nlet userSelectedDate;\nlet intervalId = null;\n\nstartButton.disabled = true; \n\nfunction initializeFlatpickr() {\n  flatpickr(input, {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    clickOpens: true,\n    onClose: handleDateSelection,\n  });\n}\n\nfunction handleDateSelection(selectedDates) {\n    if (selectedDates[0] < new Date()) {\n        startButton.disabled = true;\n      iziToast.error({\n        iconUrl: icon,\n        message: 'Please choose a date in the future',\n        messageColor: '#ffffff',\n        color: '#ef4040',\n        close: false,\n        position: 'topRight',\n      });\n    } else {\n        userSelectedDate = selectedDates[0];\n        startButton.disabled = false;\n        clearInterval(intervalId);\n    }\n};  \n\nfunction startCountdown() {\n  clearInterval(intervalId);\n  startButton.disabled = true;\n  input.disabled = true;\n    \n  intervalId = setInterval(() => {\n   const currentTime = Date.now();\n   const deltaTime = userSelectedDate - currentTime;\n    if (deltaTime <= 0) {\n      clearInterval(intervalId);\n      startButton.disabled = true;\n      input.disabled = false;\n      return;\n    }\n    const time = convertMs(deltaTime);\n      updateTimer(time);\n      \n    //  console.log(time);\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction updateTimer({ days, hours, minutes, seconds }) {\n  daysDisplayed.textContent = String(days).padStart(2, '0');\n  hoursDisplayed.textContent = String(hours).padStart(2, '0');\n  minutesDisplayed.textContent = String(minutes).padStart(2, '0');\n  secondsDisplayed.textContent = String(seconds).padStart(2, '0');\n};\n\ninitializeFlatpickr();\nstartButton.addEventListener(\"click\", startCountdown);"],"names":["input","startButton","daysDisplayed","hoursDisplayed","minutesDisplayed","secondsDisplayed","userSelectedDate","intervalId","initializeFlatpickr","flatpickr","handleDateSelection","selectedDates","iziToast","icon","startCountdown","currentTime","deltaTime","time","convertMs","updateTimer","ms","days","hours","minutes","seconds"],"mappings":"qGASA,MAAMA,EAAQ,SAAS,cAAc,uBAAuB,EACtDC,EAAc,SAAS,cAAc,QAAQ,EAC7CC,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAmB,SAAS,cAAc,oBAAoB,EAC9DC,EAAmB,SAAS,cAAc,oBAAoB,EAEpE,IAAIC,EACAC,EAAa,KAEjBN,EAAY,SAAW,GAEvB,SAASO,GAAsB,CAC7BC,EAAUT,EAAO,CACf,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,WAAY,GACZ,QAASU,CACb,CAAG,CACH,CAEA,SAASA,EAAoBC,EAAe,CACpCA,EAAc,CAAC,EAAI,IAAI,MACvBV,EAAY,SAAW,GACzBW,EAAS,MAAM,CACb,QAASC,EACT,QAAS,qCACT,aAAc,UACd,MAAO,UACP,MAAO,GACP,SAAU,UAClB,CAAO,IAECP,EAAmBK,EAAc,CAAC,EAClCV,EAAY,SAAW,GACvB,cAAcM,CAAU,EAEhC,CAEA,SAASO,GAAiB,CACxB,cAAcP,CAAU,EACxBN,EAAY,SAAW,GACvBD,EAAM,SAAW,GAEjBO,EAAa,YAAY,IAAM,CAC9B,MAAMQ,EAAc,KAAK,MACnBC,EAAYV,EAAmBS,EACpC,GAAIC,GAAa,EAAG,CAClB,cAAcT,CAAU,EACxBN,EAAY,SAAW,GACvBD,EAAM,SAAW,GACjB,MACD,CACD,MAAMiB,EAAOC,EAAUF,CAAS,EAC9BG,EAAYF,CAAI,CAGnB,EAAE,GAAI,CACT,CAEA,SAASC,EAAUE,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASL,EAAY,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACtDtB,EAAc,YAAc,OAAOmB,CAAI,EAAE,SAAS,EAAG,GAAG,EACxDlB,EAAe,YAAc,OAAOmB,CAAK,EAAE,SAAS,EAAG,GAAG,EAC1DlB,EAAiB,YAAc,OAAOmB,CAAO,EAAE,SAAS,EAAG,GAAG,EAC9DlB,EAAiB,YAAc,OAAOmB,CAAO,EAAE,SAAS,EAAG,GAAG,CAChE,CAEAhB,IACAP,EAAY,iBAAiB,QAASa,CAAc"}